---
import BaseLayout from '../layouts/BaseLayout.astro';

/* 从 URL 参数获取 card_id（如从详情页进入） */
const cardId = Astro.url.searchParams.get('card_id') || '';
---

<BaseLayout title="反馈纠错">
  <h1 class="text-2xl font-bold mb-2">反馈纠错</h1>
  <p class="text-gray-600 mb-6">
    发现信息有误、过期或缺失？请告诉我们。你的反馈将帮助我们保持信息准确。
  </p>

  <form
    action="mailto:feedback@example.com"
    method="POST"
    enctype="text/plain"
    class="max-w-xl space-y-4"
  >
    {/* 反馈类型 */}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">反馈类型</label>
      <select
        name="type"
        required
        class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      >
        <option value="">请选择...</option>
        <option value="error">信息错误</option>
        <option value="expired">信息过期</option>
        <option value="missing">信息缺失</option>
        <option value="supplement">建议补充</option>
        <option value="other">其他</option>
      </select>
    </div>

    {/* 关联卡片 */}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">关联项目卡片 ID（可选）</label>
      <input
        type="text"
        name="card_id"
        value={cardId}
        placeholder="例如 AH-LOAN-CDB-2025"
        class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
    </div>

    {/* 修改内容 */}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">你认为应修改的内容 *</label>
      <textarea
        name="content"
        required
        rows="4"
        placeholder="请描述你发现的问题或建议修改的内容..."
        class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      ></textarea>
    </div>

    {/* 依据链接 */}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">你提供的依据链接（可选）</label>
      <input
        type="url"
        name="evidence_url"
        placeholder="https://..."
        class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
    </div>

    {/* 联系方式 */}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">联系方式（可选）</label>
      <input
        type="text"
        name="contact"
        placeholder="邮箱或手机号（仅用于核实，不会公开）"
        class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      />
      <p class="text-xs text-gray-500 mt-1">仅用于核实，不会公开。</p>
    </div>

    <button
      type="submit"
      class="px-6 py-2 bg-blue-700 text-white font-medium rounded-lg hover:bg-blue-800 transition"
    >
      提交反馈
    </button>
  </form>

  <p class="mt-6 text-sm text-gray-500">
    提交后，你的反馈将进入待复核列表。感谢你帮助我们保持信息准确！
  </p>
</BaseLayout>
